<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <button class="select" id="red" value="赤">赤を持つ</button>
  <button class="select" id="green" value="緑">緑を持つ</button>
  <button class="select" id="blue" value="青">青を持つ</button>
  <button class="write" >書く</button>
  <div id="result"></div>
  <div id="graph"></div>
 
  <script>
    
    const result = document.getElementById("result");
    const write = document.querySelector(".write");
    const pens = document.querySelectorAll(".select");

    class Pen{
      constructor(length) {
        this.length = length;
      }
      write(){
        const msg = "";
        if(this.length <= 0){
          const msg="！もう書けません"
          result.textContent=msg;
        }else{
        this.length -= 0.5;
        result.textContent = `${penColor}で書きました。残りの長さ${penclass.length}`;
        setStyle();
        }
      }
    }
    
    let pen = null;
    for(let i=0;i<pens.length;i++){
      pens[i].addEventListener("click", (event)=>{
        const color = event.target.value
        const colorId = event.target.id;
        colorid = colorId;
        pen = `${color}を持った。`;
        penColor = color;
        result.textContent = pen;
        penclass = new Pen(10) 
      });
    }
    write.addEventListener("click",()=>{
      if(pen == null){
        return result.textContent = "ペンを持ってください！"; 
      }
      penclass.write();
    });
    const setStyle=()=>{
      graph.textContent = penclass.length + "cm";
      graph.style.width = penclass.length + "cm";
      graph.style.backgroundColor = colorid;
      graph.style.color = "yellow";
    };

  </script>
</body>
</html>